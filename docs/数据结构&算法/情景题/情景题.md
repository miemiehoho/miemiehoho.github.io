**单字节，双字节，四字节能够表示的数值大小范围分别是多少**

1. 单字节（无符号）：0到255；（有符号）：-128到127。
2. 双字节（无符号）：0到65535；（有符号）：-32768到32765。
3. 四字节（无符号）：$2^{32}-1$ ,即0到4294967295；（有符号）：$-2^{31}到2^{31}-1$ ，即 -2147483648到2147483647。



## 哈希函数

### 题目一

现有40亿个无符号整数（4字节）的文件，只给1G内存，要求得到出现频率前十的整数。

**经典方法**

用哈希表存储 无符号整数和其出现的次数：

在最差情况下需要 40亿*8字节 = 320亿 字节 ≈ 32G内存

**哈希函数方法**

思路：

1. 1G内存最多可以存放 10亿➗8 ≈ 1亿条记录
2. （这一步并不占用内存）利用哈希函数把每个无符号整数出现的次数统计到 100个文件中 （0 到 99）
   - 统计到 100个文件中：将无符号整数用哈希函数计算出的结果 % 100
   - 由于哈希函数的离散性质（均匀分布），每个文件差不多都有 $k/100$ 种记录（假设共有 k 种 无符号整数）
   - 由于哈希函数的确定性，相同的无符号整数一定能存入相同的文件
3. （这一步最多占用1G内存）将100个文件 （0 到 99）逐个读取到内存，计算出频率前十的 无符号整数，存入文件
4. 将 100个文件 （0 到 99）中的 top10 合并（共1000条记录），求出 频率前十的整数，就是答案 



## 排序

### 题目一

现有存放无符号整数（4字节）的8G大小的文件，只给1G内存，要求排序后保存到文件中

**分段排序法**

**堆排序法**

1. 申请一个大根堆，容量为 1亿，用来排序；一个二维数组，长度为 1亿*2，用来统计各数字的出现次数
   - 1G内存最多可以存放10亿字节，也就是 10亿➗4 ，2.5亿个无符号整数（4字节）
2. 读一遍 文件，依次把读到的数加入大根堆，这样就找到了前 1 亿小的数
   - 前1亿个数先加入大根堆，然后后面的读到的数和堆顶元素比较，小于堆顶的则加入堆中，并删除堆顶元素
3. 保存 堆中的 数到 已经申请的数组中，再读一遍文件，统计数组中这一亿个数的出现次数，然后保存到新的有序文件中
4. 申请一个临时变量 t，记录堆顶元素，然后清空堆和数组
5. 读一遍 文件，把**大于临时变量 t 的数**，依次加入大根堆，这样就又找到了大于临时变量 t 的 前 1 亿小的数
6. 重复步骤 3-5，这样就完成了排序并保存到了文件中